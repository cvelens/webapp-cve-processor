FROM golang:latest
 
WORKDIR /app
 
COPY . .
 
COPY readiness-check.sh /usr/local/bin/readiness-check.sh
COPY liveness-check.sh /usr/local/bin/liveness-check.sh

RUN chmod +x /usr/local/bin/readiness-check.sh /usr/local/bin/liveness-check.sh

RUN go mod download
 
RUN go build -o main .
 
CMD ["sh", "-c", "./main"]